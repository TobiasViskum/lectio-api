"use strict";(()=>{var e={};e.id=154,e.ids=[154],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8018:e=>{e.exports=require("puppeteer")},1715:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>m,originalPathname:()=>v,requestAsyncStorage:()=>p,routeModule:()=>g,serverHooks:()=>h,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>f});var s={};a.r(s),a.d(s,{GET:()=>GET}),a(9836);var r=a(4412),n=a(8776),i=a(9242),o=a(8380),u=a(892);async function getIsAuthenticated({username:e,password:t,schoolCode:a}){let s=await (0,u.C)({targetPage:`https://www.lectio.dk/lectio/${a}/login.aspx`});try{await s.type("#username",e),await s.type("#password",t),await Promise.all([s.click("#m_Content_submitbtn2"),s.waitForNavigation()]);try{let e=await s.$eval("div#MainTitle",e=>e.textContent);if(e)return await s.browser().close(),{isAuthenticated:!1};return await s.browser().close(),{isAuthenticated:!0}}catch{return await s.browser().close(),{isAuthenticated:!0}}}catch{return await s.browser().close(),null}}var c=a(3776);let d=c.I;async function GET(e){let t=(0,o.K)(e);try{let e=d.parse(t),a=await getIsAuthenticated(e);if(null===a)return(0,i.le)();return(0,i.Nk)(a)}catch{return(0,i.fZ)()}}let l=r.AppRouteRouteModule,g=new l({definition:{kind:n.x.APP_ROUTE,page:"/get-is-authenticated/route",pathname:"/get-is-authenticated",filename:"route",bundlePath:"app/get-is-authenticated/route"},resolvedPagePath:"/Users/tobiastv/Desktop/Development/Reactprojects/lectio-api/src/app/get-is-authenticated/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:w,serverHooks:h,headerHooks:m,staticGenerationBailout:f}=g,v="/get-is-authenticated/route"},9242:(e,t,a)=>{a.d(t,{Nk:()=>successRequest,W1:()=>successNotAuthenticated,bZ:()=>successNoData,fZ:()=>invalidParameters,le:()=>failedToGetData});var s=a(5109);function invalidParameters(){return s.Z.json({status:"error",message:"Invalid parameters"})}function successNoData(){return s.Z.json({status:"success",message:"There was no data",data:null})}function successNotAuthenticated(){return s.Z.json({status:"error",message:"User not authenticated"})}function failedToGetData(){return s.Z.json({status:"error",message:"An error happened when trying to get data."})}function successRequest(e){return s.Z.json({status:"success",message:"Successfully retrieved data",data:e})}},892:(e,t,a)=>{a.d(t,{C:()=>getBasicPage});var s=a(8018),r=a.n(s);async function getBasicPage({targetPage:e}){let t=await r().launch({headless:"new",args:["--no-sandbox"]}),a=await t.newPage();return await a.goto(e,{waitUntil:"domcontentloaded"}),a}},8380:(e,t,a)=>{a.d(t,{K:()=>getSearchParamsObject});function getSearchParamsObject(e){let t=new URLSearchParams(e.nextUrl.search),a={};for(let[e,s]of t)a[e]=s;return a}},3776:(e,t,a)=>{a.d(t,{I:()=>r});var s=a(7722);let r=s.z.object({username:s.z.string(),password:s.z.string(),schoolCode:s.z.string()})}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[765,722],()=>__webpack_exec__(1715));module.exports=a})();