"use strict";(()=>{var e={};e.id=917,e.ids=[917],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9491:e=>{e.exports=require("assert")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},8849:e=>{e.exports=require("node:http")},2286:e=>{e.exports=require("node:https")},1041:e=>{e.exports=require("node:url")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},6224:e=>{e.exports=require("tty")},5034:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},4089:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>_,requestAsyncStorage:()=>h,routeModule:()=>p,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>b});var a={};r.r(a),r.d(a,{GET:()=>GET}),r(9836);var s=r(4412),n=r(8776),i=r(9242),o=r(8380),u=r(6967);async function getStudentByCredentials({username:e,password:t,schoolCode:r}){let a=await (0,u.w)({username:e,password:t,schoolCode:r,page:"student-by-credentials"});if(null===a||"Not authenticated"===a||"No data"===a||"Invalid school"===a)return a;let s=a.$,n=a.client,i=["https://lectio.dk",s("img#s_m_HeaderContent_picctrlthumbimage").attr("src"),"&fullsize=1"].join(""),o=await n.get(i).then(e=>{let t=e.headers["content-type"],r=Buffer.from(e.data,"binary").toString("base64"),a=["data:",t,";base64,",r].join("");return a}).catch(e=>null),l=s("div#s_m_HeaderContent_MainTitle[data-lectiocontextcard]").attr("data-lectiocontextcard");l&&(l=l.replace("S",""));let d=s("div#s_m_HeaderContent_MainTitle > span.ls-hidden-smallscreen").text(),c="",p="",h=d.match(/Eleven ([a-z0-9 ]+), /i),m=d.match(/Eleven [a-z0-9 ]+, ([a-z0-9-]+) /i);return h&&(c=h[1]),m&&(p=m[1]),{name:c,class:p,studentId:l||"",imgUrl:i,imgSrc:o||""}}var l=r(3776);let d=l.I;async function GET(e){let t=(0,o.K)(e);try{let e=d.parse(t),r=await getStudentByCredentials(e);if("Not authenticated"===r)return(0,i.Wo)();if("Invalid school"===r)return(0,i.Dy)();if("No data"===r)(0,i.bZ)();else if(null===r)return(0,i.le)();else return(0,i.Nk)(r)}catch{return(0,i.fZ)()}}let c=s.AppRouteRouteModule,p=new c({definition:{kind:n.x.APP_ROUTE,page:"/get-student/by-credentials/route",pathname:"/get-student/by-credentials",filename:"route",bundlePath:"app/get-student/by-credentials/route"},resolvedPagePath:"/Users/tobiastv/Desktop/Development/Reactprojects/lectio-api/src/app/get-student/by-credentials/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:x,headerHooks:g,staticGenerationBailout:b}=p,_="/get-student/by-credentials/route"},8380:(e,t,r)=>{r.d(t,{K:()=>getSearchParamsObject});function getSearchParamsObject(e){let t=new URLSearchParams(e.nextUrl.search),r={};for(let[e,a]of t)r[e]=a;return r}},3776:(e,t,r)=>{r.d(t,{I:()=>s});var a=r(7722);let s=a.z.object({username:a.z.string(),password:a.z.string(),schoolCode:a.z.string()})}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[212,722,616],()=>__webpack_exec__(4089));module.exports=r})();