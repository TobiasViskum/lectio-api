"use strict";exports.id=933,exports.ids=[933],exports.modules={9242:(t,e,a)=>{a.d(e,{Nk:()=>successRequest,W1:()=>successNotAuthenticated,bZ:()=>successNoData,fZ:()=>invalidParameters,le:()=>failedToGetData});var s=a(5109);function invalidParameters(){return s.Z.json({status:"error",message:"Invalid parameters"})}function successNoData(){return s.Z.json({status:"success",message:"There was no data",data:null})}function successNotAuthenticated(){return s.Z.json({status:"error",message:"User not authenticated"})}function failedToGetData(){return s.Z.json({status:"error",message:"An error happened when trying to get data."})}function successRequest(t){return s.Z.json({status:"success",message:"Successfully retrieved data",data:t})}},3231:(t,e,a)=>{a.d(e,{w:()=>getAuthenticatedPage});var s=a(8018),n=a.n(s);async function getAuthenticatedPage({username:t,password:e,schoolCode:a,targetPage:s}){let r=await n().launch({headless:"new",args:["--no-sandbox"]}),o=await r.newPage();try{await o.goto(`https://www.lectio.dk/lectio/${a}/login.aspx`),await o.type("#username",t),await o.type("#password",e),await Promise.all([o.click("#m_Content_submitbtn2"),o.waitForNavigation()]);try{let t=await o.$eval("div#MainTitle",t=>t.textContent);if(console.log(t),t)return await o.browser().close(),"Not authenticated";return await o.goto(s,{waitUntil:"domcontentloaded"}),o}catch{return await o.goto(s,{waitUntil:"domcontentloaded"}),o}}catch{return await o.browser().close(),"Error"}}}};